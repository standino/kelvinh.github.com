<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>简单</title>
    <link>http://standino.github.io/</link>
    <description>多想，多做，多总结。不要怕吃亏。</description>
    <pubDate>五, 17 6月 2016 14:40:13 CST</pubDate>
    <lastBuildDate>五, 17 6月 2016 14:40:13 CST</lastBuildDate>
    <docs>http://www.rssboard.org/rss-specification</docs>
    <generator>Org-page static site generator (https://github.com/kelvinh/org-page)</generator>
    <item>
      <title>JD Projects</title>
      <link>http://standino.github.io/work/jd-projects/</link>
      <description><![CDATA[<div>
  <div class="post">
    <div id="page-wrapper">
      <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">JD Projects</h1>
          <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline6">1. REPORTS</a>
<ul>
<li><a href="#orgheadline1">1.1. SCRUM BOARD</a></li>
<li><a href="#orgheadline2">1.2. DEVELOPER SUMMARY</a></li>
<li><a href="#orgheadline3">1.3. BURNDOWN CHART</a></li>
<li><a href="#orgheadline4">1.4. BURNDOWN LIST</a></li>
<li><a href="#orgheadline5">1.5. TASK LIST</a></li>
</ul>
</li>
<li><a href="#orgheadline26">2. TASKS</a>
<ul>
<li><a href="#orgheadline7">2.1. <span class="done DONE">DONE</span> 上柜SKU出现在不动销里问题研究</a></li>
<li><a href="#orgheadline8">2.2. <span class="done DONE">DONE</span> 升级SSO</a></li>
<li><a href="#orgheadline9">2.3. <span class="done DONE">DONE</span> 替换HBase access中限制条数的代码</a></li>
<li><a href="#orgheadline10">2.4. <span class="done DONE">DONE</span> 多维分析过滤不合法数据</a></li>
<li><a href="#orgheadline11">2.5. <span class="done DONE">DONE</span> 重构前端代码</a></li>
<li><a href="#orgheadline12">2.6. <span class="done DONE">DONE</span> 优化测试数据脚本</a></li>
<li><a href="#orgheadline13">2.7. <span class="done DONE">DONE</span> 实现导出功能</a></li>
<li><a href="#orgheadline14">2.8. <span class="done DONE">DONE</span> 修复不能下载全部数据的bug</a></li>
<li><a href="#orgheadline15">2.9. <span class="done DONE">DONE</span> can not debug after webpack build</a></li>
<li><a href="#orgheadline16">2.10. <span class="done DONE">DONE</span> 测试12万条数据下的下载功能</a></li>
<li><a href="#orgheadline17">2.11. <span class="done DONE">DONE</span> OIH库存健康任务梳理</a></li>
<li><a href="#orgheadline18">2.12. <span class="done DONE">DONE</span> 下线无用的任务</a></li>
<li><a href="#orgheadline19">2.13. <span class="done DONE">DONE</span> 数据需求-60天不动销sku</a></li>
<li><a href="#orgheadline20">2.14. <span class="done DONE">DONE</span> 尝试ORC存储格式加工数据</a></li>
<li><a href="#orgheadline21">2.15. <span class="done DONE">DONE</span> 维度列名重构</a></li>
<li><a href="#orgheadline22">2.16. <span class="done DONE">DONE</span> 编写判定采购员类型服务类</a></li>
<li><a href="#orgheadline23">2.17. <span class="done DONE">DONE</span> 添加采购员row key逻辑</a></li>
<li><a href="#orgheadline24">2.18. <span class="todo NEXT">NEXT</span> 编写专利</a></li>
<li><a href="#orgheadline25">2.19. <span class="todo NEXT">NEXT</span> 全球购自营下柜有库存告警</a></li>
</ul>
</li>
<li><a href="#orgheadline27">3. BACKLOG</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6"><span class="section-number-2">1</span> REPORTS</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> SCRUM BOARD</h3>
<div class="outline-text-3" id="text-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">TODO</th>
<th scope="col" class="org-left">NEXT</th>
<th scope="col" class="org-left">DONE</th>
<th scope="col" class="org-left">DEFERRED</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">. 基于新架构实现运营看板</td>
<td class="org-left">. 在大数据平台创建调度任务导数</td>
<td class="org-left">. 设计Cube</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">. 编写Presto视图对事实表进行数据权限控制</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">. 编写事实表和维度表</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">. 调研Redux的使用</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">. 只有研发人员可以修改mondrian schema 文件</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">. 使用Redux方式访问后台Restful服务</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">. 编写指标和计算项 (2016-02-17)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">. 编写运营看板页面</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">. Tomcat session 同步 (2016-02-17)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">. 研究sessionid 过期问题 (2016-02-17)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">. 在Presto集群创建相关表 (2016-02-16)</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">1.2</span> DEVELOPER SUMMARY</h3>
<div class="outline-text-3" id="text-1-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">NAME</th>
<th scope="col" class="org-right">ESTIMATED</th>
<th scope="col" class="org-right">ACTUAL</th>
<th scope="col" class="org-right">DONE</th>
<th scope="col" class="org-right">REMAINING</th>
<th scope="col" class="org-right">PENCILS DOWN</th>
<th scope="col" class="org-left">PROGRESS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Will</td>
<td class="org-right">529</td>
<td class="org-right">139</td>
<td class="org-right">127</td>
<td class="org-right">402</td>
<td class="org-right">2016-04-28</td>
<td class="org-left">##--------</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">1.3</span> BURNDOWN CHART</h3>
<div class="outline-text-3" id="text-1-3">
<pre class="example">
                                 Burndown

8 +----#---+---------+--------+---------+--------+---------+--------+----+
  |                                                        ACTUAL ###### |
7 +    ........                                             IDEAL ...... +
  |            .                                                         |
6 +             ........                                                 +
  |                     ..                                               |
  |                                                                      |
5 +                       ........                                       +
  |                               .                                      |
4 +                                .........                             +
  |                                         .                            |
3 +                                          ........                    +
  |                                                  .                   |
2 +                                                   ........           +
  |                                                           ..         |
  |                                                                      |
1 +                                                             ........ +
  |                                                                     .|
0 +--------+---------+--------+---------+--------+---------+--------+----.
  0        2         4        6         8        10        12       14
</pre>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">1.4</span> BURNDOWN LIST</h3>
<div class="outline-text-3" id="text-1-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">DAY</td>
<td class="org-left">DATE</td>
<td class="org-left">ACTUAL</td>
<td class="org-left">IDEAL</td>
<td class="org-left">TASKS COMPLETED</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">1.5</span> TASK LIST</h3>
<div class="outline-text-3" id="text-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">ITEM</th>
<th scope="col" class="org-left">TASKID</th>
<th scope="col" class="org-left">OWNER</th>
<th scope="col" class="org-left">PRIORITY</th>
<th scope="col" class="org-left">TODO</th>
<th scope="col" class="org-right">ESTIMATED</th>
<th scope="col" class="org-right">ACTUAL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">* TASKS</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">292</td>
<td class="org-right">69</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">** 基于新架构实现运营看板 [ 55D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">TODO</td>
<td class="org-right">292</td>
<td class="org-right">69</td>
</tr>

<tr>
<td class="org-left"><b>*</b> 创建定时任务导入相关事实表和维度表 [ 5D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">16</td>
<td class="org-right">16</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 确定事实表和维度表名称 [1D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 在Presto集群创建相关表 [2D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">DONE</td>
<td class="org-right">16</td>
<td class="org-right">16</td>
</tr>

<tr>
<td class="org-left"><b><b>*</b></b> 如何设计雪花模型</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 在大数据平台创建调度任务导数 [3D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">NEXT</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>*</b> 编写Mondrian 4.0 Schema 配置文件  [ 10D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">48</td>
<td class="org-right">48</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 设计Cube [2D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">DONE</td>
<td class="org-right">16</td>
<td class="org-right">16</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 编写事实表和维度表 [3D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">DONE</td>
<td class="org-right">16</td>
<td class="org-right">16</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 编写指标和计算项 [5D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">DONE</td>
<td class="org-right">16</td>
<td class="org-right">16</td>
</tr>

<tr>
<td class="org-left"><b>*</b> 编写Restful服务执行MDX&amp;SQL返回数据 [ 10D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 梳理需要的MDX和SQL语句 [2D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 编写Restful服务并对结果进行缓存[8D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>*</b> 功能权限和数据权限控制 [ 20D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">110</td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 只有研发人员可以修改mondrian schema 文件 [5D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">DONE</td>
<td class="org-right">55</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 编写Presto视图对事实表进行数据权限控制 [15D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">TODO</td>
<td class="org-right">55</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><b>*</b> 异步预加载功能 [ 20D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">55</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 异步调用模板编写 [10D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">55</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 编写Worker预加载运营看板页面中需要使用的MDX/SQL [10D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>*</b> 前端页面框架重构  [ 30D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">55</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 调研Redux的使用 [ 10D ]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">TODO</td>
<td class="org-right">55</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 使用Redux方式访问后台Restful服务 [10D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">TODO</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>**</b> 编写运营看板页面 [10D]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">TODO</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>*</b> Tomcat session 同步</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">B</td>
<td class="org-left">DONE</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>*</b> 研究sessionid 过期问题</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Will</td>
<td class="org-left">B</td>
<td class="org-left">DONE</td>
<td class="org-right">8</td>
<td class="org-right">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-orgheadline26" class="outline-2">
<h2 id="orgheadline26"><a id="TASKS"></a><span class="section-number-2">2</span> TASKS</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">2.1</span> <span class="done DONE">DONE</span> 上柜SKU出现在不动销里问题研究</h3>
<div class="outline-text-3" id="text-2-1">
<p>

</p>

<div class="org-src-container">

<pre class="src src-sql">SELECT delv_center_num, dim_delv_center_name FROM
                            dim.dim_delv_center
where dim_delv_center_name like '%东莞%'

SELECT
                  item_sku_id,
                 stock.delv_center_num,
center.dim_delv_center_name,
                  coalesce(sale_qtty_30, 0) as  sale_qtty_30,
coalesce(sale_qtty_60, 0) as  sale_qtty_60

            FROM
            (
                    SELECT delv_center_num, dim_delv_center_name FROM
                            dim.dim_delv_center
            )
            center

left JOIN
                  app.app_dashboard_sale_qtty_period_tmp_chuku stock
    ON
            (
                    center.delv_center_num = stock.delv_center_num
            )


            WHERE
                  tx_dt= '2016-05-03'
and item_sku_id = '1717369'

select * from app.app_dashboard_sale_qtty_period_tmp_chuku stock
where tx_dt= '2016-05-03'
and item_sku_id = '1717369'
and delv_center_num='614'


select
utc_tm,
                            if(datediff('2016-05-03', otc_tm) &lt;= 30,1,0) as is_new_shanggui_flag
                    FROM
                            app.app_dashboard_sku_info
                    WHERE
                            dt = '2016-05-03'
                            AND item_third_cate_name NOT IN ('赠品','空调外机')
                            AND item_first_cate_name NOT IN ('测试分类1')
                            AND is_new_flag = 0
and item_sku_id = '1121567'
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sql">select *
FROM app.app_dashboard_agg_oih_health_60
WHERE
  dt ='2016-05-03'
  AND (is_zx_flag = 1 OR no_sale_flag = 1)
  AND revolve_day&gt;90
limit 10;
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sql">select distinct
        sku.item_sku_id                     as 'SKU编码',
        p.discount                          as '折扣'   ,
        stock.wh_qtn                        as '仓报价'  ,
        sfs.jd_unit_amount                  as '优惠前单价',
        sfs.sale_unit_amount                as '优惠后单价',
        sfs.discount                        as '计算的折扣',
        sfs.sale_unit_amount - stock.wh_qtn as '价格差距' ,
        sku.item_first_cate_name                      ,
        sku.item_second_cate_name                     ,
        sku.item_third_cate_name,
        sku.sku_name                        as 'SKU名称'
from
        (
                select
                        item_sku_id          ,
                        sku_name             ,
                        item_first_cate_name ,
                        item_second_cate_name,
                        item_third_cate_name
                from
                        app.app_dashboard_sku_info
                where
                        dt = sysdate( - 1)
        )
        sku
JOIN
        (
                select
                        rfid    ,
                        name    ,
                        discount,
                        citys   ,
                        timeend
                from
                        fdm.fdm_pricemanage_promotionunit_chain
                where
                        start_date   &lt;= sysdate( - 1)
                        AND end_date  &gt; sysdate( - 1)
                        and timeend  &gt;= sysdate( - 1)
                        and timebegin &lt; sysdate( - 1)
                        and citys like '%6%'
                        and discount &gt; 0
        )
        p
on
        sku.item_sku_id = p.rfid
JOIN
        (
                select
                        sku_id                                              ,
                        jd_unit_amount     / sale_qtty as jd_unit_amount    ,
                        sale_unit_amount   / sale_qtty as sale_unit_amount  ,
                        total_offer_amount / sale_qtty as total_offer_amount,
                        (jd_unit_amount    - sale_unit_amount) / jd_unit_amount
                        as discount
                from
                        app.app_sfs_price_promotion_global
                where
                        dt = sysdate( - 1)
        )
        sfs
on
        sku.item_sku_id = sfs.sku_id
Join
        (
                SELECT
                        a1.item_sku_id    ,
                        a1.delv_center_num,
                        coalesce(a1.wh_qtn, 0) as wh_qtn
                FROM
                        app.app_dashboard_abstract_stock a1
                WHERE
                        a1.dt               = sysdate( - 1)
                        and delv_center_num = 6
        )
        stock
ON
        (
                sku.item_sku_id = stock.item_sku_id
        )
where
        sfs.sale_unit_amount - stock.wh_qtn &lt; 20 ;
</pre>
</div>
<p>
折扣查询：
</p>

<div class="org-src-container">

<pre class="src src-sql">    select  count ( *)
    from
            (
                    select
                            item_sku_id          ,
                            sku_name             ,
                            item_first_cate_name ,
                            item_second_cate_name,
                            item_third_cate_name
                    from
                            app.app_dashboard_sku_info
                    where
                            dt = '2016-05-03'
            )
            sku
    JOIN
            (
                    select
                            rfid    ,
                            name    ,
                            discount,
                            citys   ,
                            timeend
                    from
                            fdm.fdm_pricemanage_promotionunit_chain
                    where
                            start_date  &lt;= '2016-05-03'
                            AND end_date &gt; '2016-05-03'
                            and timeend &gt;= '2016-05-03'
                            and timebegin &lt; '2016-05-03'
                            and citys like '%6%'
                            and discount &gt;0
            )
            p
    on
            sku.item_sku_id = p.rfid
    JOIN
            (
                    select
                            sku_id                                              ,
                            jd_unit_amount     / sale_qtty as jd_unit_amount    ,
                            sale_unit_amount   / sale_qtty as sale_unit_amount  ,
                            total_offer_amount / sale_qtty as total_offer_amount,
                            (jd_unit_amount    - sale_unit_amount) / jd_unit_amount
                            as discount
                    from
                            app.app_sfs_price_promotion_global
                    where
                            dt = '2016-05-03'
            )
            sfs
    on
            sku.item_sku_id = sfs.sku_id

Join (
                    SELECT
                            a1.item_sku_id    ,
                            a1.delv_center_num,
                            coalesce(a1.wh_qtn ,0) as wh_qtn
                   FROM
                            app.app_dashboard_abstract_stock a1

                    WHERE
                            a1.dt  = '2016-05-03'
                            and delv_center_num = 6
            )
            stock
ON
            (
                    sku.item_sku_id = stock.item_sku_id
            )
where

sfs.sale_unit_amount - stock.wh_qtn &lt; 20
</pre>
</div>
<div class="org-src-container">

<pre class="src src-sql">    select distinct
            sku.item_sku_id       ,
            p.discount            ,
            stock.wh_qtn,
            sfs.jd_unit_amount    ,
            sfs.sale_unit_amount  ,
            sfs.discount,
            sku.sku_name
    from
            (
                    select
                            item_sku_id          ,
                            sku_name             ,
                            item_first_cate_name ,
                            item_second_cate_name,
                            item_third_cate_name
                    from
                            app.app_dashboard_sku_info
                    where
                            dt = '2016-05-03'
                            and (
                            sku_name like '%脱毛%'
                         )
            )
            sku
    JOIN
            (
                    select
                            rfid    ,
                            name    ,
                            discount,
                            citys   ,
                            timeend
                    from
                            fdm.fdm_pricemanage_promotionunit_chain
                    where
                            start_date  &lt;= '2016-05-03'
                            AND end_date &gt; '2016-05-03'
                            and timeend &gt;= '2016-05-03'
                            and timebegin &lt; '2016-05-03'
                            and citys like '%6%'
                            and discount &gt;0
            )
            p
    on
            sku.item_sku_id = p.rfid
    JOIN
            (
                    select
                            sku_id                                              ,
                            jd_unit_amount     / sale_qtty as jd_unit_amount    ,
                            sale_unit_amount   / sale_qtty as sale_unit_amount  ,
                            total_offer_amount / sale_qtty as total_offer_amount,
                            (jd_unit_amount    - sale_unit_amount) / jd_unit_amount
                            as discount
                    from
                            app.app_sfs_price_promotion_global
                    where
                            dt = '2016-05-03'
            )
            sfs
    on
            sku.item_sku_id = sfs.sku_id

Join (
                    SELECT
                            a1.item_sku_id    ,
                            a1.delv_center_num,
                            coalesce(a1.wh_qtn ,0) as wh_qtn
                   FROM
                            app.app_dashboard_abstract_stock a1

                    WHERE
                            a1.dt  = '2016-05-03'
                            and delv_center_num = 6
            )
            stock
ON
            (
                    sku.item_sku_id = stock.item_sku_id
            )
where

sfs.sale_unit_amount - stock.wh_qtn &lt; 20
order by p.discount desc
 limit 10 ;
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sql">select p.sku_id,
p.sku_name,
p.promotion_price,
sku.item_first_cate_name,
sku.item_second_cate_name,
sku.item_third_cate_name
from
fdm.fdm_o2o_promotion_product_promotion_sku_chain p
JOIN app.app_dashboard_sku_info sku
on sku.dt=sysdate(-1) and sku.item_sku_id = p.sku_id
and sku.item_second_cate_name like '牙膏'
where p.start_date&lt;=sysdate(-1) AND p.end_date&gt;sysdate(-1)
and p.end_time&gt;=sysdate()
limit 10
;

select
sku.item_sku_id,
sku.sku_name,
p.discount,
p.citys,
sfs.jd_unit_amount,
sfs.sale_unit_amount,
sfs.total_offer_amount,
sfs.discount
from
(
select
item_sku_id,
sku_name,
item_first_cate_name,
item_second_cate_name,
item_third_cate_name
 from
app.app_dashboard_sku_info
where dt='2016-05-03'
and sku_name like '%牙膏%'
) sku
JOIN(
select
rfid,
name,
discount,
citys,
timeend
from
fdm.fdm_pricemanage_promotionunit_chain
where start_date&lt;= '2016-05-03' AND end_date&gt;'2016-05-03'
and timeend&gt;='2016-05-03'
) p
on sku.item_sku_id = p.rfid
JOIN(
select
sku_id,
jd_unit_amount/sale_qtty as jd_unit_amount,
sale_unit_amount/sale_qtty as sale_unit_amount,
total_offer_amount/sale_qtty as total_offer_amount,
(jd_unit_amount - sale_unit_amount ) / jd_unit_amount  as discount
from
app.app_sfs_price_promotion_global
where dt = '2016-05-03'
) sfs
on sku.item_sku_id = sfs.sku_id

limit 10
;


select
sku.item_sku_id,
sku.sku_name,
p.jd_unit_amount,
p.sale_unit_amount,
p.total_offer_amount,
p.discount
from
(
select
item_sku_id,
sku_name,
item_first_cate_name,
item_second_cate_name,
item_third_cate_name
 from
app.app_dashboard_sku_info
where dt='2016-05-03'
and sku_name like '%牙膏%'
) sku
JOIN(
select
sku_id,
jd_unit_amount/sale_qtty as jd_unit_amount,
sale_unit_amount/sale_qtty as sale_unit_amount,
total_offer_amount/sale_qtty as total_offer_amount,
(jd_unit_amount - sale_unit_amount ) / jd_unit_amount  as discount
from
app.app_sfs_price_promotion_global
where dt = '2016-05-03'
) p
on sku.item_sku_id = p.sku_id
limit 10
;

select sku_id from app.app_sfs_price_promotion_global

select
idmainproduct,
price,
inprice,
cbj
from
fdm.fdm_pricemanage_promotionmainproduct_chain
where start_date&lt;= '2016-05-03' AND end_date&gt;'2016-05-03'
limit 10;


select ware_id ,warename from fdm.fdm_vcs_ware_base_price_mysql_chain
where start_date&lt;= '2016-05-03' AND end_date&gt;'2016-05-03'
limit 10;
</pre>
</div>


<div class="org-src-container">

<pre class="src src-sql">select a.item_sku_id
                  ,a.main_sku_id
                  ,a.sku_name
                  ,a.brand_code
                  ,a.barndname_en
                  ,a.barndname_cn
                  ,a.barndname_full
                  ,a.sku_status_cd
                  , a.otc_tm
                  ,a.utc_tm
from app.app_dashboard_sku_info a
where a.dt='2016-04-27' and a.item_sku_id ='2539607'
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">2.2</span> <span class="done DONE">DONE</span> 升级SSO</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2016-05-04 三 18:21]</span></span>
<a href="file:///home/will/cwboot/work/scrum-jd.html#MissingReference">上柜SKU出现在不动销里问题研究</a>
</p>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">2.3</span> <span class="done DONE">DONE</span> 替换HBase access中限制条数的代码</h3>
<div class="outline-text-3" id="text-2-3">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">2.4</span> <span class="done DONE">DONE</span> 多维分析过滤不合法数据</h3>
<div class="outline-text-3" id="text-2-4">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">2.5</span> <span class="done DONE">DONE</span> 重构前端代码</h3>
<div class="outline-text-3" id="text-2-5">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">2.6</span> <span class="done DONE">DONE</span> 优化测试数据脚本</h3>
<div class="outline-text-3" id="text-2-6">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">2.7</span> <span class="done DONE">DONE</span> 实现导出功能</h3>
<div class="outline-text-3" id="text-2-7">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">2.8</span> <span class="done DONE">DONE</span> 修复不能下载全部数据的bug</h3>
<div class="outline-text-3" id="text-2-8">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15"><span class="section-number-3">2.9</span> <span class="done DONE">DONE</span> can not debug after webpack build</h3>
<div class="outline-text-3" id="text-2-9">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16"><span class="section-number-3">2.10</span> <span class="done DONE">DONE</span> 测试12万条数据下的下载功能</h3>
<div class="outline-text-3" id="text-2-10">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2016-05-18 三 10:19]</span></span>
数据量超过两千条就不行了。
</p>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17"><span class="section-number-3">2.11</span> <span class="done DONE">DONE</span> OIH库存健康任务梳理</h3>
<div class="outline-text-3" id="text-2-11">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18"><span class="section-number-3">2.12</span> <span class="done DONE">DONE</span> 下线无用的任务</h3>
<div class="outline-text-3" id="text-2-12">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">2.13</span> <span class="done DONE">DONE</span> 数据需求-60天不动销sku</h3>
<div class="outline-text-3" id="text-2-13">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20"><span class="section-number-3">2.14</span> <span class="done DONE">DONE</span> 尝试ORC存储格式加工数据</h3>
<div class="outline-text-3" id="text-2-14">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2016-06-01 三 12:51]</span></span>
<a href="file:///home/will/jd/ihs_hive_py/src/main/python/modules/oih/app_dashboard_agg_oih_health.sql#MissingReference">file:///home/will/jd/ihs_hive_py/src/main/python/modules/oih/app_dashboard_agg_oih_health.sql#MissingReference</a>
</p>

<p>
数据插入错误
</p>
</div>
</div>
<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21"><span class="section-number-3">2.15</span> <span class="done DONE">DONE</span> 维度列名重构</h3>
<div class="outline-text-3" id="text-2-15">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22"><span class="section-number-3">2.16</span> <span class="done DONE">DONE</span> 编写判定采购员类型服务类</h3>
<div class="outline-text-3" id="text-2-16">
<p>

</p>
</div>
</div>
<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23"><span class="section-number-3">2.17</span> <span class="done DONE">DONE</span> 添加采购员row key逻辑</h3>
<div class="outline-text-3" id="text-2-17">
<p>

</p>


<div class="org-src-container">

<pre class="src src-sql">caoxinyue
New2015.


pengtingting
密码：6525313@Ptt


shanfulin Song@350
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24"><span class="section-number-3">2.18</span> <span class="todo NEXT">NEXT</span> 编写专利</h3>
<div class="outline-text-3" id="text-2-18">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2016-06-14 二 09:10]</span></span>
<a href="file:///home/will/cwboot/blog/planning2016.html#MissingReference">专注与一个开源项目，把它做精，打好自己的井</a>
</p>
</div>
</div>
<div id="outline-container-orgheadline25" class="outline-3">
<h3 id="orgheadline25"><span class="section-number-3">2.19</span> <span class="todo NEXT">NEXT</span> 全球购自营下柜有库存告警</h3>
<div class="outline-text-3" id="text-2-19">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2016-06-14 二 13:07]</span></span>
kill -9  `lsof -i:8080 | awk '{print $2}'`
</p>


<p>
nohup mvn tomcat:run  &gt;/dev/null 2&gt;&amp;1&amp;
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline27" class="outline-2">
<h2 id="orgheadline27"><span class="section-number-2">3</span> BACKLOG</h2>
<div class="outline-text-2" id="text-3">
</div>
</div>

        </div>
      </div>
    </div>]]></description>
      <pubDate>2016-06-17</pubDate>
      <guid>http://standino.github.io/work/jd-projects/</guid>
    </item>
    <item>
      <title>2016年计划</title>
      <link>http://standino.github.io/blog/html/2016/01/04/2016年计划/</link>
      <description><![CDATA[为明年做一下计划]]></description>
      <pubDate>2016-06-16</pubDate>
      <guid>http://standino.github.io/blog/html/2016/01/04/2016年计划/</guid>
    </item>
    <item>
      <title>Untitled</title>
      <link>http://standino.github.io/work/untitled/</link>
      <description><![CDATA[]]></description>
      <pubDate>2016-06-14</pubDate>
      <guid>http://standino.github.io/work/untitled/</guid>
    </item>
    <item>
      <title>Personal</title>
      <link>http://standino.github.io/work/html/personal</link>
      <description><![CDATA[My Personal information ]]></description>
      <pubDate>2016-06-01</pubDate>
      <guid>http://standino.github.io/work/html/personal</guid>
    </item>
    <item>
      <title>2015年计划</title>
      <link>http://standino.github.io/blog/html/2014/12/20/2015年计划/</link>
      <description><![CDATA[]]></description>
      <pubDate>2016-05-24</pubDate>
      <guid>http://standino.github.io/blog/html/2014/12/20/2015年计划/</guid>
    </item>
    <item>
      <title>驻足思考</title>
      <link>http://standino.github.io/blog/2016/05/23/驻足思考</link>
      <description><![CDATA[]]></description>
      <pubDate>2016-05-23</pubDate>
      <guid>http://standino.github.io/blog/2016/05/23/驻足思考</guid>
    </item>
    <item>
      <title>javascript</title>
      <link>http://standino.github.io/blog/html/js</link>
      <description><![CDATA[]]></description>
      <pubDate>2016-05-17</pubDate>
      <guid>http://standino.github.io/blog/html/js</guid>
    </item>
    <item>
      <title>linux</title>
      <link>http://standino.github.io/blog/html/linux</link>
      <description><![CDATA[]]></description>
      <pubDate>2016-05-13</pubDate>
      <guid>http://standino.github.io/blog/html/linux</guid>
    </item>
    <item>
      <title>大数据</title>
      <link>http://standino.github.io/blog/html/bigdata</link>
      <description><![CDATA[]]></description>
      <pubDate>2016-04-14</pubDate>
      <guid>http://standino.github.io/blog/html/bigdata</guid>
    </item>
    <item>
      <title>大数据OLAP报表系统开发白皮书</title>
      <link>http://standino.github.io/work/2015/01/29/olapdevguide</link>
      <description><![CDATA[]]></description>
      <pubDate>2016-04-06</pubDate>
      <guid>http://standino.github.io/work/2015/01/29/olapdevguide</guid>
    </item>
  </channel>
</rss>