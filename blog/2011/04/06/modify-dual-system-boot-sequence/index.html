<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>ubuntu10.10和windows双系统启动顺序的修改 - org-page</title>
    <meta charset="utf-8" />
    <meta name="author" content="Kelvin Hu" />
    <meta name="description" content="how to modify boot sequence with dual system" />
    <meta name="keywords" content="dual system, ubuntu, windows" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">org-page</a></h1>
        <p>static site generator</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/wiki/">Wiki</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/standino">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="q" value="site:standino.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>ubuntu10.10和windows双系统启动顺序的修改</h1>
<p>
<b>这是我在博客园的博客中的文章。</b>
</p>

<p>
下面是原文（未大改，稍作了一些格式上的调整）：
</p>

<hr  />

<p>
我想大部分童鞋装ubuntu的时候，硬盘上的windows肯定还是保留着的，启动电脑时可以选择，想进windows就进windows，想进ubuntu就进ubuntu。但装完ubuntu后，它默认启动的是ubuntu，这对于使用ubuntu作为系统的童鞋来说没什么，但对那些经常要进windows的童鞋，每次开机都得按几次向下的箭头，再敲回车，非常不方便，有没有方法，让电脑开机时默认启动windows呢？这个是可以有的，而且这个也真的有。^_^
</p>

<p>
说到启动就不得不说GRUB，Linux下大名鼎鼎的启动管理工具（曾经的LILO已经风光不再），当然现在已经是GRUB2了，GRUB2和GRUB最重要的区别就是，GRUB存放系统启动信息的文件为 <b>/boot/grub/menu.lst</b> ，而GRUB2则为 <b>/boot/grub/grub.cfg</b> 。由于ubuntu10.10采用的是GRUB2，所以这里主要讲GRUB2。
</p>

<p>
终端输入 <code>gedit /boot/grub/grub.cfg</code> ，打开这个文件，开头几行注释如下：
</p>

<pre class="example">
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
</pre>

<p>
这里说得很清楚：不要编辑这个文件，这个文件是根据 <b>/etc/grub.d</b> 的模板和 <b>/etc/default/grub</b> 的设置自动生成的，所以网上流行的编辑这个文件来达到修改启动顺序的方法是不正确的，至少是不合理的，因为一旦更新内核什么的话，这个文件又会自动生成，之前的更新就会失效。
</p>

<p>
那既然不能修改这个文件，那就看看/etc/grub.d和/etc/default/grub好了，前者是个文件夹，暂时不管，后者是个文件，其内容如下（删去了一些没太大帮助的注释）：
</p>

<pre class="example">
# If you change this file, run 'update-grub' afterwards to update
# /boot/grub/grub.cfg.
GRUB_DEFAULT=0
GRUB_HIDDEN_TIMEOUT_QUIET=true
GRUB_TIMEOUT=10
GRUB_DISTRIBUTOR=`lsb_release -i -s 2&gt; /dev/null || echo Debian`
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"
GRUB_CMDLINE_LINUX=""
</pre>

<p>
<code>GRUB_DEFAULT</code> 代表的就是启动项的顺序，从数字0开始，依次代表如下启动项（这是在我的电脑上，不同的ubuntu版本和windows系统可能会有一些不同）：
</p>

<pre class="example">
Ubuntu, with Linux 2.6.35-28-generic
Ubuntu, with Linux 2.6.35-28-generic (recovery mode)
Memory test (memtest86+)
Memory test (memtest86+, serial console 115200)
Windows 7 (loader) (on /dev/sda1)
</pre>

<p>
windows排第四位（注意，顺序是从0开始计的），所以， <b>把GRUB_DEFAULT的值修改为4</b> ，然后别忘了运行命令：
</p>

<pre class="example">
sudo update-grub
</pre>

<p>
好了，重启电脑，默认启动的系统就换到windows了。
</p>

<p>
另外，还有一种比较高级的方法也可以修改windows为默认启动系统，运行：
</p>

<pre class="example">
sudo mv /etc/grub.d/30_os-prober /etc/grub.d/06_os-prober
sudo update-grub
</pre>

<p>
执行完成后，重启电脑，也能默认启动windows了。
</p>

<p>
一部分童鞋看到这里，觉得修改启动顺序的方法已经找到，可以心满意足地把这个标签页给关掉了（如果你用的还是IE6，好吧，我承认你要关闭的是窗口）；另一部分想延伸开来的童鞋肯定想知道原理是什么了，这里先卖个关子吧：要知是何原理，且听下回分解。^_^
</p>

<p>
附：这篇文章是我对GRUB2作了一些研究之后，根据需求并利用GRUB2的配置原理写出来的，关于GRUB2的一些东西我全都参考的这里：<a href="https://help.ubuntu.com/community/Grub2">https://help.ubuntu.com/community/Grub2</a>。所以，如果你英文过关并且有耐心的话，不妨去这里看一下，我上面卖的关子就不攻自破了。 :P
</p>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2011-04-06</span>
        <span title="last modification date" class="post-info">2013-06-08</span>
        <span title="tags" class="post-info"><a href="/tags/ubuntu/">Ubuntu</a>, <a href="/tags/linux/">Linux</a>, <a href="/tags/windows/">Windows</a></span>
        <span title="author" class="post-info">Kelvin Hu</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2011/04/06/modify-dual-system-boot-sequence/";
          var disqus_url = "http://standino.github.io/blog/2011/04/06/modify-dual-system-boot-sequence/";
          var disqus_shortname = 'standino';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </section>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-46515756-1']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.4)</p>
        <p>
          Copyright &copy; 2012 - 2013 <a href="mailto:ini &lt;dot&gt; kelvin &lt;at&gt; gmail &lt;dot&gt; com">Kelvin Hu</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
        </p>
      </div>
    </div>
  </body>
</html>
